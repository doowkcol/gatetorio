==========================================
Gatetorio Gate Controller UI
==========================================
Starting at: Tue 18 Nov 07:15:58 GMT 2025

Process Process-3:
Traceback (most recent call last):
  File "/usr/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
    ~~~~~~~~^^
  File "/usr/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/doowkcol/Gatetorio_Code/input_manager.py", line 677, in input_manager_process
    manager.run()
    ~~~~~~~~~~~^^
  File "/home/doowkcol/Gatetorio_Code/input_manager.py", line 266, in run
    self._sample_all_inputs(consecutive_active, consecutive_inactive)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/doowkcol/Gatetorio_Code/input_manager.py", line 297, in _sample_all_inputs
    is_active = self._determine_input_state(input_name, input_cfg, consecutive_active,
                                            consecutive_inactive, now)
  File "/home/doowkcol/Gatetorio_Code/input_manager.py", line 385, in _determine_input_state
    value = self.analog_inputs[channel].value
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/dist-packages/adafruit_ads1x15/analog_in.py", line 56, in value
    return self._ads.read(pin)
           ~~~~~~~~~~~~~~^^^^^
  File "/usr/local/lib/python3.13/dist-packages/adafruit_ads1x15/ads1x15.py", line 330, in read
    return self._read(pin)
           ~~~~~~~~~~^^^^^
  File "/usr/local/lib/python3.13/dist-packages/adafruit_ads1x15/ads1x15.py", line 369, in _read
    return self._conversion_value(self.get_last_result(False))
                                  ~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/usr/local/lib/python3.13/dist-packages/adafruit_ads1x15/ads1x15.py", line 384, in get_last_result
    return self._read_register(_ADS1X15_POINTER_CONVERSION, fast)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/dist-packages/adafruit_ads1x15/ads1x15.py", line 402, in _read_register
    i2c.write_then_readinto(bytearray([reg]), self.buf, in_end=2)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/dist-packages/adafruit_bus_device/i2c_device.py", line 135, in write_then_readinto
    self.i2c.writeto_then_readfrom(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.device_address,
        ^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
        in_end=in_end,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/dist-packages/busio.py", line 240, in writeto_then_readfrom
    return self._i2c.writeto_then_readfrom(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        address,
        ^^^^^^^^
    ...<6 lines>...
        stop=stop,
        ^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/dist-packages/adafruit_blinka/microcontroller/generic_linux/i2c.py", line 98, in writeto_then_readfrom
    readin = self._i2c_bus.read_i2c_block_data(
        address, buffer_out[out_start:out_end], in_end - in_start
    )
  File "/usr/local/lib/python3.13/dist-packages/Adafruit_PureIO/smbus.py", line 264, in read_i2c_block_data
    ioctl(self._device.fileno(), I2C_RDWR, request)
    ~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
OSError: [Errno 121] Remote I/O error
Input Manager: ADC1 initialized at address 0x48 (ADDR->GND)
Input Manager: ADC2 initialized at address 0x49 (ADDR->VDD)
Input Manager: 2 ADC(s) initialized successfully (8 channels available)
Input Manager initialized:
  Inputs configured: 8
  Sample rate: 0.01s (100.0Hz)
  ADC available: True
  Channels available: 8
Input Manager: Starting main loop

================================================================================
CONFIGURED INPUTS (8 total):
================================================================================
  IN1                  Ch= 0 Type=NC  Func=close_limit_m1       [ENABLED]
  IN2                  Ch= 1 Type=NO  Func=open_limit_m1        [ENABLED]
  IN3                  Ch= 2 Type=NO  Func=open_limit_m2        [ENABLED]
  IN4                  Ch= 3 Type=NC  Func=close_limit_m2       [ENABLED]
  IN5                  Ch= 4 Type=NO  Func=cmd_close            [ENABLED]
  IN6                  Ch= 5 Type=8K2 Func=cmd_open             [ENABLED]
  IN7                  Ch= 6 Type=NO  Func=None                 [ENABLED]
  IN8                  Ch= 7 Type=NO  Func=None                 [ENABLED]
================================================================================

[INPUT RAW] IN1                  func=close_limit_m1       raw=ACTIVE was=inactive V=0.00
[INPUT DEBOUNCED] IN1                  func=close_limit_m1       → ACTIVE
[INPUT RAW] IN4                  func=close_limit_m2       raw=ACTIVE was=inactive V=0.00
[INPUT DEBOUNCED] IN4                  func=close_limit_m2       → ACTIVE
[INPUT RAW] IN1                  func=close_limit_m1       raw=inactive was=ACTIVE V=3.31
[INPUT RAW] IN1                  func=close_limit_m1       raw=inactive was=ACTIVE V=3.30
[INPUT DEBOUNCED] IN1                  func=close_limit_m1       → inactive
Motor Manager initialized
Motor Manager process started
[LIMIT SWITCH] M2 CLOSE limit reached - position was 0.00s (0.0%), setting to 0.0s (0%)
[LIMIT SWITCH] M2 CLOSE limit reached - position was 0.00s (0.0%), setting to 0.0s (0%)
[CLOSE DELAY] M1 starting immediately - M2 already at close position (-0.00s)
[LIMIT SWITCH] M2 CLOSE limit reached - position was 0.00s (0.0%), setting to 0.0s (0%)
[CLOSE DELAY] M1 starting immediately - M2 already at close position (-0.00s)
[FAULT] M2 LIMIT_STUCK: OPENING - open limit still active at 4.28s (50% = 4.28s) (consecutive MOVEMENTS: 1)
[FAULT] M1 LIMIT_MISSING: OPENING - open limit not activated at 7.84s (consecutive MOVEMENTS: 1)
[LIMIT SWITCH] M2 CLOSE limit reached - position was 12.65s (147.8%), setting to 0.0s (0%)
Motor Manager process stopped
Gate Controller V2 (Step 3 - Three Processes) initialized
  M1 travel time: 7.835115489037847s, M2 travel time: 8.557032567378949s
  M2 enabled: True
  Motor Manager PID: 3493
  Input Manager PID: 3494
  Auto-close: ENABLED (5.0s)
[STARTUP] Detected gate at CLOSED position (both motors at close limits)
Window created
Status label created
Open button created
All UI elements created
Building input displays for 8 inputs: ['IN1', 'IN2', 'IN3', 'IN4', 'IN5', 'IN6', 'IN7', 'IN8']
Creating display for IN1...
  ✓ Display created for IN1
Creating display for IN2...
  ✓ Display created for IN2
Creating display for IN3...
  ✓ Display created for IN3
Creating display for IN4...
  ✓ Display created for IN4
Creating display for IN5...
  ✓ Display created for IN5
Creating display for IN6...
  ✓ Display created for IN6
Creating display for IN7...
  ✓ Display created for IN7
Creating display for IN8...
  ✓ Display created for IN8
Total input displays created: 8
Window created
Starting mainloop
PARTIAL 1 activated!
Opening to PARTIAL_1 (50%) - M1 position START=0.00s TARGET=3.92s
PARTIAL 1 deactivated
PARTIAL 1 activated!
M1 at PARTIAL_1 (50%), M2 CLOSED
PARTIAL 1 deactivated
Starting PO1 auto-close timer (5.0s)
Partial 1 auto-close triggered - sending momentary CLOSE pulse
Partial 1 auto-close pulse received - closing from PARTIAL_1

>>> CLOSE command - M1:3.9s M2:0.0s
CLOSING photocell activated (blocked)!
CLOSING PHOTOCELL triggered during CLOSING - reopening to PARTIAL_1
Opening to PARTIAL_1 (50%) - M1 position START=1.01s TARGET=3.92s
CLOSING photocell deactivated (clear)
M1 at PARTIAL_1 (50%), M2 CLOSED
Partial 1 auto-close triggered - sending momentary CLOSE pulse
Partial 1 auto-close pulse received - closing from PARTIAL_1

>>> CLOSE command - M1:3.9s M2:0.0s
OPEN button activated!
[COMMANDS ACTIVE] cmd_open | state=CLOSING
OPEN command while closing - reversing (priority override)

>>> [_execute_open CALLED] M1:2.0s M2:-0.0s
    Current state: CLOSING, safety_reversing: False
    Flags: cmd_open=True, stop_opening_active=False
OPEN button deactivated
STOP button activated!
[COMMANDS ACTIVE] cmd_stop | state=OPENING

>>> STOP command - M1:12.9s M2:12.6s
STOP button deactivated
Exit button pressed - shutting down all processes
Shutting down gate controller...
Gate controller shutdown complete
Exiting Python process
